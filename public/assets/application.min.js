(function() {
  var doStuff, formatUrl, reset;

  reset = function() {
    return $('#issueRacer').html("");
  };

  formatUrl = function(baseUrl) {
    var newurl;
    newurl = baseUrl.split('/');
    newurl[2] = "api." + newurl[2] + "/repos";
    newurl = newurl.join('/') + "/issues";
    return newurl;
  };

  doStuff = function(issuePath) {
    return $.getJSON(issuePath + "?state=closed", function(response) {
      var closed, issue, open, _i, _len;
      open = 0;
      closed = 0;
      for (_i = 0, _len = response.length; _i < _len; _i++) {
        issue = response[_i];
        if (issue.state === "open") {
          open++;
        } else {
          closed++;
        }
        $('#issueRacer').append("<p><img width='50px' src='" + issue.user.avatar_url + "'/> " + issue.user.login + "</p>");
      }
      $('#issueRacer').append("<p>closed: " + closed + " open: " + open + "</p>");
      return console.log(open, closed);
    });
  };

  $(function() {
    var init, issuePath;
    init = (function() {})();
    issuePath = 'https://api.github.com/repos/laravel/framework/issues';
    doStuff(issuePath);
    return $(document).on("change", "[name='repo']", function(e) {
      var path;
      path = $("[name='repo']").val();
      reset();
      return doStuff(formatUrl(path));
    });
  });

}).call(this);
